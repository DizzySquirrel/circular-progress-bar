!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CircularProgressBar=t()}(this,(function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const t={colorCircle:!1,colorSlice:"#00a1ff",end:264,fontColor:"#365b74",fontSize:"1.6rem",fontWeight:400,lineargradient:!1,number:!0,round:!1,fill:"none",unit:"%",rotation:-90,opacity:10,size:200,stroke:10};return class{constructor(i){e(this,"initial",(e=>{if("IntersectionObserver"in window){const t=new IntersectionObserver(((e,t)=>{e.map((e=>{e.isIntersecting&&e.intersectionRatio>.75&&(this.cSVG(e.target),t.unobserve(e.target))}))}),{root:null,rootMargin:"0px",threshold:1});e.map((e=>{t.observe(e)}))}else e.map((e=>{this.cSVG(e)}))})),e(this,"progressBar",((e,t,i)=>{i.number&&e.insertAdjacentElement("beforeend",this.percentEl(i));const n={fill:"none","stroke-width":i.stroke,"stroke-dasharray":"264","stroke-linecap":i.round?"round":""},r=document.querySelector(`.${this.pieName}-circle-${i.index}`);this.sAttr(r,n,!1),this.animationTo({...i,element:r},!0),r.setAttribute("style",`transform:rotate(${i.rotation}deg);transform-origin: 50% 50%`),r.setAttribute("stroke",i.lineargradient?`url(#linear-${i.index})`:i.colorSlice),t.setAttribute("style",`width:${i.size}px;height:${i.size}px;`)})),e(this,"sDashOffset",((e,t,i)=>{const n=264-e/100*(i?2.64*(100-i):264);return t?-n:n})),e(this,"animationTo",((e,i=!1)=>{const n=Math.round(e.percent),r=JSON.parse(document.querySelector(`[data-pie-index="${e.index}"]`).dataset.pie),s=document.querySelector(`.${this.pieName}-circle-${e.index}`);if(!s)return;let o=JSON.parse(s.getAttribute("data-angel"));const a=i?e:{...t,...r,...e},c=document.querySelector(`.${this.pieName}-percent-${e.index}`);if(a.animationOff)return a.number&&(c.textContent=""+a.percent),void s.setAttribute("stroke-dashoffset",this.sDashOffset(a.percent,a.inverse));if(0==n&&(a.number&&(c.textContent="0"),s.setAttribute("stroke-dashoffset","264")),n>100||n<=0||o===n)return;let l,d=i?0:o;const h=1e3/(a.speed||1e3);let u=performance.now();const p=e=>{l=requestAnimationFrame(p);const t=e-u;t>=h-.1&&(u=e-t%h,o>=a.percent?d--:d++),s.setAttribute("stroke-dashoffset",this.sDashOffset(d,a.inverse,a.cut)),c&&a.number&&(c.textContent=""+d),d===n&&(s.setAttribute("data-angel",d),cancelAnimationFrame(l))};requestAnimationFrame(p)})),e(this,"percentEl",(e=>{const t=document.createElementNS(this.svg,"text");t.insertAdjacentElement("afterbegin",this.cTspan(`${this.pieName}-percent-${e.index}`)),t.insertAdjacentElement("beforeend",this.cTspan(`${this.pieName}-unit-${e.index}`,e.unit));const i={x:"50%",y:"50%",fill:e.fontColor,"font-size":e.fontSize,"font-weight":e.fontWeight,"text-anchor":"middle",dy:e.textPosition||"0.35em"};return this.sAttr(t,i,!1),t})),e(this,"cTspan",((e,t)=>{const i=document.createElementNS(this.svg,"tspan");return i.classList.add(e),t&&(i.textContent=t),i})),e(this,"cSVG",(e=>{const i=JSON.parse(e.getAttribute("data-pie")),n=e.getAttribute("data-pie-index"),r={...t,...i,index:n},s=document.createElementNS(this.svg,"svg"),o={role:"img",width:r.size,height:r.size,viewBox:"0 0 100 100"};this.sAttr(s,o,!1),r.colorCircle&&s.appendChild(this.cCircle(r,"bottom")),r.lineargradient&&s.appendChild(this.cGradient(r)),s.appendChild(this.cCircle(r,"top",!0)),e.appendChild(s),this.progressBar(s,e,r)})),e(this,"cGradient",(({index:e,lineargradient:t})=>{const i=document.createElementNS(this.svg,"defs"),n=document.createElementNS(this.svg,"linearGradient");n.id="linear-"+e;const r=[].slice.call(t);i.appendChild(n);let s=0;return r.map((e=>{const t=document.createElementNS(this.svg,"stop"),i={offset:s+"%","stop-color":""+e};this.sAttr(t,i,!1),n.appendChild(t),s+=100/(r.length-1)})),i})),e(this,"cCircle",((e,t,i=!1)=>{const n=document.createElementNS(this.svg,"circle");let r={};if(e.cut){const t=264-2.64*(100-e.cut);r={"stroke-dasharray":264,"stroke-linecap":e.round?"round":"","stroke-dashoffset":e.inverse?-t:t,style:`transform:rotate(${e.rotation}deg);transform-origin: 50% 50%`}}const s={fill:e.fill,stroke:e.colorCircle,"stroke-width":e.strokeBottom||e.stroke,...r};e.strokeDasharray&&Object.assign(s,{"stroke-dasharray":e.strokeDasharray});const o={cx:"50%",cy:"50%",r:42,"shape-rendering":"geometricPrecision","data-angle":i?0:"",..."top"===t?{class:`${this.pieName}-circle-${e.index}`}:s};return this.sAttr(n,o,!1),n})),e(this,"sAttr",((e,t,i=!1)=>{for(const n in t)i?e.setAttributeNS(null,n,t[n]):e.setAttribute(n,t[n])})),this.pieName=i,this.svg="http://www.w3.org/2000/svg";const n=document.querySelectorAll("."+i),r=[].slice.call(n);r.map(((e,t)=>{e.setAttribute("data-pie-index",t+1)})),this.initial(r)}}}));
