!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CircularProgressBar=t()}(this,(function(){"use strict";const e={colorSlice:"#00a1ff",fontColor:"#000",fontSize:"1.6rem",fontWeight:400,lineargradient:!1,number:!0,round:!1,fill:"none",unit:"%",rotation:-90,size:200,stroke:10},t=({rotation:e,animationSmooth:t})=>`transform:rotate(${e}deg);transform-origin: 50% 50%;${t?"transition: stroke-dashoffset "+t:""}`,n=e=>({"stroke-dasharray":e||"264"}),i=({round:e})=>({"stroke-linecap":e?"round":""}),r=e=>({"font-size":e.fontSize,"font-weight":e.fontWeight}),s=e=>document.querySelector(e),o=(e,{lineargradient:t,index:n,colorSlice:i})=>{e.setAttribute("stroke",t?`url(#linear-${n})`:i)},a=(e,t)=>{for(const n in t)null==e||e.setAttribute(n,t[n])},l=e=>document.createElementNS("http://www.w3.org/2000/svg",e),c=(e,t)=>{const n=l("tspan");return n.classList.add(e),t&&(n.textContent=t),n},d=(e,t,n)=>{const i=264-e/100*(n?2.64*(100-n):264);return t?-i:i},u=(e,t,n="beforeend")=>e.insertAdjacentElement(n,t);return class{constructor(e,t={}){this.className=e,this.globalObj=t;const n=document.querySelectorAll("."+e),i=[].slice.call(n);i.map(((e,t)=>{e.setAttribute("data-pie-index",t+1)})),this.elements=i}initial(e){const t=e||this.elements;Array.isArray(t)?t.map((e=>this.createSVG(e))):this.createSVG(t)}progress(e,d,f){const p=this.className;f.number&&u(e,((e,t)=>{const n=l("text");n.classList.add(`${t}-text-${e.index}`),u(n,c(`${t}-percent-${e.index}`)),u(n,c(`${t}-unit-${e.index}`,e.unit));const i={x:"50%",y:"50%",fill:e.fontColor,"text-anchor":"middle",dy:e.textPosition||"0.35em",...r(e)};return a(n,i),n})(f,p));const h=s(`.${p}-circle-${f.index}`),m={fill:"none","stroke-width":f.stroke,"stroke-dashoffset":"264",...n(),...i(f)};a(h,m),this.animationTo({...f,element:h},!0),h.setAttribute("style",t(f)),o(h,f),d.setAttribute("style",`width:${f.size}px;height:${f.size}px;`)}animationTo(t,n=!1){const i=this.className,l=JSON.parse(s(`[data-pie-index="${t.index}"]`).getAttribute("data-pie")),c=s(`.${i}-circle-${t.index}`);if(!c)return;const u=n?t:{...e,...l,...t,...this.globalObj};if(n||o(c,u),!n&&u.number){const e={fill:u.fontColor,...r(u)},t=s(`.${i}-text-${u.index}`);a(t,e)}const f=s(`.${i}-percent-${t.index}`);if(u.animationOff)return u.number&&(f.textContent=""+u.percent),void c.setAttribute("stroke-dashoffset",d(u.percent,u.inverse));let p=JSON.parse(c.getAttribute("data-angel"));const h=Math.round(t.percent);if(0==h&&(u.number&&(f.textContent="0"),c.setAttribute("stroke-dashoffset","264")),h>100||h<=0||p===h)return;let m,b=n?0:p;const g=1e3/(u.speed||1e3);let x=performance.now();const $=e=>{m=requestAnimationFrame($);const t=e-x;t>=g-.1&&(x=e-t%g,p>=u.percent?b--:b++),c.setAttribute("stroke-dashoffset",d(b,u.inverse,u.cut)),f&&u.number&&(f.textContent=""+b),c.setAttribute("data-angel",b),c.parentNode.setAttribute("aria-valuenow",b),b===h&&cancelAnimationFrame(m)};requestAnimationFrame($)}createSVG(t){const n=t.getAttribute("data-pie-index"),i=JSON.parse(t.getAttribute("data-pie")),r={...e,...i,index:n,...this.globalObj},s=l("svg"),o={role:"progressbar",width:r.size,height:r.size,viewBox:"0 0 100 100","aria-valuemin":"0","aria-valuemax":"100"};a(s,o),r.colorCircle&&s.appendChild(this.circle(r)),r.lineargradient&&s.appendChild((({index:e,lineargradient:t})=>{const n=l("defs"),i=l("linearGradient");i.id="linear-"+e;const r=[].slice.call(t);n.appendChild(i);let s=0;return r.map((e=>{const t=l("stop");a(t,{offset:s+"%","stop-color":""+e}),i.appendChild(t),s+=100/(r.length-1)})),n})(r)),s.appendChild(this.circle(r,"top")),t.appendChild(s),this.progress(s,t,r)}circle(e,r="bottom"){const s=l("circle");let o={};if(e.cut){const r=264-2.64*(100-e.cut);o={"stroke-dashoffset":e.inverse?-r:r,style:t(e),...n(),...i(e)}}const c={fill:e.fill,stroke:e.colorCircle,"stroke-width":e.strokeBottom||e.stroke,...o};e.strokeDasharray&&Object.assign(c,{...n(e.strokeDasharray)});const d={cx:"50%",cy:"50%",r:42,"shape-rendering":"geometricPrecision",..."top"===r?{class:`${this.className}-circle-${e.index}`}:c};return a(s,d),s}}}));
