!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).CircularProgressBar=e()}(this,(function(){"use strict";const t={colorCircle:"",colorSlice:"#00a1ff",end:264,fontColor:"#000",fontSize:"1.6rem",fontWeight:400,lineargradient:!1,number:!0,round:!1,fill:"none",unit:"%",rotation:-90,opacity:10,size:200,stroke:10};return class{constructor(e){this.initial=t=>{const e=t||this.elements;Array.isArray(e)?e.map((t=>this.elSVG(t))):this.elSVG(e)},this.progress=(t,e,i)=>{i.number&&t.insertAdjacentElement("beforeend",this.percent(i));const r=document.querySelector(`.${this.pieName}-circle-${i.index}`),n={fill:"none","stroke-width":i.stroke,"stroke-dasharray":"264","stroke-linecap":i.round?"round":""};this.attr(r,n),this.animationTo({...i,element:r},!0),r.setAttribute("style",`transform:rotate(${i.rotation}deg);transform-origin: 50% 50%`),this.color(r,i),e.setAttribute("style",`width:${i.size}px;height:${i.size}px;`)},this.color=(t,{lineargradient:e,index:i,colorSlice:r})=>{t.setAttribute("stroke",e?`url(#linear-${i})`:r)},this.dashOffset=(t,e,i)=>{const r=264-t/100*(i?2.64*(100-i):264);return e?-r:r},this.animationTo=(e,i=!1)=>{const r=this.pieName,n=JSON.parse(document.querySelector(`[data-pie-index="${e.index}"]`).getAttribute("data-pie")),s=document.querySelector(`.${r}-circle-${e.index}`);if(!s)return;const o=i?e:{...t,...n,...e};if(i||this.color(s,o),!i&&o.number){const t={fill:o.fontColor,"font-size":o.fontSize,"font-weight":o.fontWeight},e=document.querySelector(`.${r}-text-${o.index}`);this.attr(e,t)}const a=document.querySelector(`.${r}-percent-${e.index}`);if(o.animationOff)return o.number&&(a.textContent=""+o.percent),void s.setAttribute("stroke-dashoffset",this.dashOffset(o.percent,o.inverse));let c=JSON.parse(s.getAttribute("data-angel"));const l=Math.round(e.percent);if(0==l&&(o.number&&(a.textContent="0"),s.setAttribute("stroke-dashoffset","264")),l>100||l<=0||c===l)return;let d,h=i?0:c;const f=1e3/(o.speed||1e3);let u=performance.now();const p=t=>{d=requestAnimationFrame(p);const e=t-u;e>=f-.1&&(u=t-e%f,c>=o.percent?h--:h++),s.setAttribute("stroke-dashoffset",this.dashOffset(h,o.inverse,o.cut)),a&&o.number&&(a.textContent=""+h),h===l&&(s.setAttribute("data-angel",h),cancelAnimationFrame(d))};requestAnimationFrame(p)},this.percent=t=>{const e=this.pieName,i=this.creNS("text");i.classList.add(`${e}-text-${t.index}`),i.insertAdjacentElement("afterbegin",this.tspan(`${e}-percent-${t.index}`)),i.insertAdjacentElement("beforeend",this.tspan(`${e}-unit-${t.index}`,t.unit));const r={x:"50%",y:"50%",fill:t.fontColor,"font-size":t.fontSize,"font-weight":t.fontWeight,"text-anchor":"middle",dy:t.textPosition||"0.35em"};return this.attr(i,r),i},this.tspan=(t,e)=>{const i=this.creNS("tspan");return i.classList.add(t),e&&(i.textContent=e),i},this.elSVG=e=>{const i=e.getAttribute("data-pie-index"),r=JSON.parse(e.getAttribute("data-pie")),n={...t,...r,index:i},s=this.creNS("svg"),o={role:"img",width:n.size,height:n.size,viewBox:"0 0 100 100"};this.attr(s,o),n.colorCircle&&s.appendChild(this.circle(n,"bottom")),n.lineargradient&&s.appendChild(this.gradient(n)),s.appendChild(this.circle(n,"top",!0)),e.appendChild(s),this.progress(s,e,n)},this.gradient=({index:t,lineargradient:e})=>{const i=this.creNS("defs"),r=this.creNS("linearGradient");r.id="linear-"+t;const n=[].slice.call(e);i.appendChild(r);let s=0;return n.map((t=>{const e=this.creNS("stop"),i={offset:s+"%","stop-color":""+t};this.attr(e,i),r.appendChild(e),s+=100/(n.length-1)})),i},this.circle=(t,e,i=!1)=>{const r=this.creNS("circle");let n={};if(t.cut){const e=264-2.64*(100-t.cut);n={"stroke-dasharray":"264","stroke-linecap":t.round?"round":"","stroke-dashoffset":t.inverse?-e:e,style:`transform:rotate(${t.rotation}deg);transform-origin: 50% 50%`}}const s={fill:t.fill,stroke:t.colorCircle,"stroke-width":t.strokeBottom||t.stroke,...n};t.strokeDasharray&&Object.assign(s,{"stroke-dasharray":t.strokeDasharray});const o={cx:"50%",cy:"50%",r:42,"shape-rendering":"geometricPrecision","data-angle":i?0:"",..."top"===e?{class:`${this.pieName}-circle-${t.index}`}:s};return this.attr(r,o),r},this.creNS=t=>document.createElementNS(this.svg,t),this.attr=(t,e)=>{for(const i in e)null==t||t.setAttribute(i,e[i])},this.pieName=e,this.svg="http://www.w3.org/2000/svg";const i=document.querySelectorAll("."+e),r=[].slice.call(i);r.map(((t,e)=>{t.setAttribute("data-pie-index",e+1)})),this.elements=r}}}));
