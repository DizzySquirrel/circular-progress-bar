var CircularProgressBar=function(){"use strict";function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){t(r,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))}))}return r}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var c,a=t[Symbol.iterator]();!(n=(c=a.next()).done)&&(r.push(c.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={colorCircle:!1,colorSlice:"#00a1ff",end:264,fontColor:"#365b74",fontSize:"1.6rem",fontWeight:700,lineargradient:!1,number:!0,opacity:10,round:!1,size:200,stroke:10};return function e(i){var c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"onChange",(function(t){if("IntersectionObserver"in window){var e=0,r=new IntersectionObserver((function(t,r){t.forEach((function(t){t.isIntersecting&&t.intersectionRatio>.75&&(c.createSvg(t.target,e),r.unobserve(t.target),e++)}))}),{root:null,rootMargin:"0px",threshold:0});t.forEach((function(t){r.observe(t)}))}else for(var n=0;n<t.length;n++)c.createSvg(t[n],n)})),t(this,"hexTorgb",(function(t,e){return"rgba("+(t=t.replace("#","")).match(new RegExp("(.{"+t.length/3+"})","g")).map((function(e){return parseInt(t.length%2?e+e:e,16)})).concat(e/100||1).join(",")+")"})),t(this,"circularBar",(function(t,e,n){var i=n.index,o=n.number,a=n.stroke,l=n.round,u=n.lineargradient,s=n.colorSlice,p=n.colorCircle,f=n.opacity,b=n.size,d=document.querySelector(".".concat(c.pieName,"-circle-").concat(i));o&&t.appendChild(c.percentElement(n)),d.setAttribute("fill","none"),d.setAttribute("stroke-width",a),d.setAttribute("stroke-linecap",l?"round":""),d.setAttribute("transform","rotate(-90, 50, 50)"),c.animationTo(r(r({},n),{},{element:d}),!0),d.setAttribute("stroke",u?"url(#linear-".concat(i,")"):s);var h=p?"":"border-radius: 50%; box-shadow: inset 0px 0px ".concat(a,"px ").concat(a,"px ").concat(c.hexTorgb(s,f));e.setAttribute("style","".concat(b,"px; height: ").concat(b,"px;  position: relative; ").concat(h))})),t(this,"animationTo",(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.index,i=t.percent,a=document.querySelector(".pie-circle-".concat(n));if(a){var l=JSON.parse(a.getAttribute("data-angel")),u=JSON.parse(c.pieElement[n].getAttribute("data-pie")),s=e?t:r(r(r({},u),o),t),p=document.querySelector(".pie-circle-".concat(n)),f=document.getElementById("".concat(c.pieName,"-percent-").concat(n));if(!(i>100||i<0||l===i)){var b,d=e?0:l,h=function t(){l>=s.percent?d--:d++,b=requestAnimationFrame(t),p.setAttribute("stroke-dasharray",2.64*d+", 20000"),f&&s.number&&(f.textContent="".concat(d,"%")),d===i&&(p.setAttribute("data-angel",d),cancelAnimationFrame(b))};requestAnimationFrame(h)}}})),t(this,"percentElement",(function(t){var e=t.index,r=t.fontSize,n=t.fontWeight,i=t.fontColor,o=document.createElementNS(c.svg,"text");return o.id="".concat(c.pieName,"-percent-").concat(e),o.setAttributeNS(null,"x","50%"),o.setAttributeNS(null,"y","50%"),o.setAttributeNS(null,"font-size",r),o.setAttributeNS(null,"font-weight",n),o.setAttributeNS(null,"fill",i),o.setAttributeNS(null,"text-anchor","middle"),o.setAttributeNS(null,"alignment-baseline","central"),o})),t(this,"getDataPie",(function(t){return JSON.parse(c.pieElement[t].getAttribute("data-pie"))})),t(this,"createSvg",(function(t,e){var n=JSON.parse(t.getAttribute("data-pie")),i=r(r(r({},o),n),e),a=document.createElementNS(c.svg,"svg"),l=c.circleSvg(!0),u=c.circleSvg();l.setAttribute("class","".concat(c.pieName,"-circle-").concat(n.index)),i.colorCircle&&(u.setAttributeNS(null,"fill","none"),u.setAttributeNS(null,"stroke",i.colorCircle),u.setAttributeNS(null,"stroke-width","".concat(i.stroke)),a.appendChild(u)),a.setAttributeNS(null,"width",i.size),a.setAttributeNS(null,"height",i.size),a.setAttributeNS(null,"viewBox","0 0 100 100"),a.setAttributeNS(c.xmlns,"xmlns",c.xmlns),i.lineargradient&&a.appendChild(c.linearGradient(i.index,i)),a.appendChild(l),t.appendChild(a),c.circularBar(a,t,i)})),t(this,"linearGradient",(function(t,e){var r=document.createElementNS(c.svg,"defs"),n=document.createElementNS(c.svg,"linearGradient");n.id="linear-".concat(t);var i=[].slice.call(e.lineargradient);r.appendChild(n);for(var o=0,a=0;a<i.length;a++){var l=document.createElementNS(c.svg,"stop");l.setAttributeNS(null,"offset","".concat(o,"%")),l.setAttribute("style","stop-color: ".concat(i[a],";")),n.appendChild(l),o+=100/(i.length-1)}return r})),t(this,"circleSvg",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=document.createElementNS(c.svg,"circle");return e.setAttributeNS(null,"cx","50"),e.setAttributeNS(null,"cy","50"),e.setAttributeNS(null,"r","42"),e.setAttributeNS(null,"shape-rendering","geometricPrecision"),t&&e.setAttribute("data-angel",0),e})),t(this,"setAttr",(function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0,o=Object.entries(e);i<o.length;i++){var c=n(o[i],2),a=c[0],l=c[1];r?t.setAttributeNS(null,a,l):t.setAttribute(a,l)}})),this.pieName=i,this.pieElement=document.querySelectorAll(".".concat(i)),this.svg="http://www.w3.org/2000/svg",this.xmlns="http://www.w3.org/2000/xmlns/",this.xlink="http://www.w3.org/1999/xlink",this.onChange(this.pieElement)}}();
