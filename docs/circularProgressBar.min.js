var CircularProgressBar=function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n={colorCircle:!1,colorSlice:"#00a1ff",end:264,fontColor:"#365b74",fontSize:"1.6rem",fontWeight:400,lineargradient:!1,number:!0,round:!1,opacity:10,size:200,stroke:10};return function e(o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"initial",(function(e){if("IntersectionObserver"in window){var t=new IntersectionObserver((function(e,t){e.map((function(e){e.isIntersecting&&e.intersectionRatio>.75&&(i.createSvg(e.target),t.unobserve(e.target))}))}),{root:null,rootMargin:"0px",threshold:1});e.map((function(e){t.observe(e)}))}else e.map((function(e){i.createSvg(e)}))})),r(this,"hex2rgb",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="string"==typeof e?parseInt(e.replace("#",""),16):e;return"rgba(".concat(r>>16,", ").concat((65280&r)>>8,", ").concat(255&r,", ").concat(t/100,")")})),r(this,"progressBar",(function(e,r,n){n.number&&e.insertBefore(i.percentElement(n),e.firstElementChild);var o=document.querySelector(".".concat(i.pieName,"-circle-").concat(n.index)),c={fill:"none","stroke-width":n.stroke,"stroke-dasharray":264,"stroke-linecap":n.round?"round":""};i.setAttr(o,c,!1),o.setAttribute("style","transform:rotate(".concat(n.rotation||-90,"deg);transform-origin: 50% 50%")),i.animationTo(t(t({},n),{},{element:o}),!0),o.setAttribute("stroke",n.lineargradient?"url(#linear-".concat(n.index,")"):n.colorSlice);var a=n.colorCircle?"":"border-radius:50%;box-shadow:inset 0px 0px ".concat(n.stroke,"px ").concat(n.stroke,"px ").concat(i.hex2rgb(n.colorSlice,n.opacity));r.setAttribute("style","width:".concat(n.size,"px;height:").concat(n.size,"px;position:relative;").concat(a))})),r(this,"getDashOffset",(function(e,t,r){var n=264-e/100*(r?2.64*(100-r):264);return t?-n:n})),r(this,"animationTo",(function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Math.round(e.percent),c=JSON.parse(document.querySelector('[data-index="'.concat(e.index,'"]')).dataset.pie),a=document.querySelector(".".concat(i.pieName,"-circle-").concat(e.index));if(a){var s=JSON.parse(a.getAttribute("data-angel")),l=r?e:t(t(t({},n),c),e),u=document.querySelector(".".concat(i.pieName,"-percent-").concat(e.index));if(l.animationOff)return l.number&&(u.textContent="".concat(l.percent,"%")),void a.setAttribute("stroke-dashoffset",i.getDashOffset(l.percent,l.inverse));if(0==o&&(l.number&&(u.textContent="0%"),a.setAttribute("stroke-dashoffset",264)),!(o>100||o<=0||s===o)){var d,f=r?0:s,p=l.speed||1e3,g=1e3/p,m=.1,h=performance.now(),v=function e(t){d=requestAnimationFrame(e);var r=t-h;r>=g-m&&(h=t-r%g,s>=l.percent?f--:f++),a.setAttribute("stroke-dashoffset",i.getDashOffset(f,l.inverse,l.cut)),u&&l.number&&(u.textContent="".concat(f,"%")),f===o&&(a.setAttribute("data-angel",f),cancelAnimationFrame(d))};requestAnimationFrame(v)}}})),r(this,"percentElement",(function(e){var t=document.createElementNS(i.svg,"text"),r={class:"".concat(i.pieName,"-percent-").concat(e.index),x:"50%",y:"50%",fill:e.fontColor,"font-size":e.fontSize,"font-weight":e.fontWeight,"text-anchor":"middle",dy:e.textPosition||"0.35em"};return i.setAttr(t,r,!1),t})),r(this,"createSvg",(function(e){var r=JSON.parse(e.getAttribute("data-pie")),o=e.getAttribute("data-index"),c=t(t(t({},n),r),{},{index:o}),a=document.createElementNS(i.svg,"svg"),s={role:"img",width:c.size,height:c.size,viewBox:"0 0 100 100"};i.setAttr(a,s,!1),c.colorCircle&&a.appendChild(i.circleSvg(c,"bottom")),c.lineargradient&&a.appendChild(i.gradient(c)),a.appendChild(i.circleSvg(c,"top",!0)),e.appendChild(a),i.progressBar(a,e,c)})),r(this,"gradient",(function(e){var t=e.index,r=e.lineargradient,n=document.createElementNS(i.svg,"defs"),o=document.createElementNS(i.svg,"linearGradient");o.id="linear-".concat(t);var c=[].slice.call(r);n.appendChild(o);var a=0;return c.map((function(e){var t=document.createElementNS(i.svg,"stop"),r={offset:"".concat(a,"%"),"stop-color":"".concat(e)};i.setAttr(t,r,!1),o.appendChild(t),a+=100/(c.length-1)})),n})),r(this,"circleSvg",(function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElementNS(i.svg,"circle"),c={};if(e.cut){var a=264-2.64*(100-e.cut);c={"stroke-dasharray":264,"stroke-linecap":e.round?"round":"","stroke-dashoffset":e.inverse?-a:a,style:"transform:rotate(".concat(e.rotation||-90,"deg);transform-origin: 50% 50%")}}var s=t({fill:"none",stroke:e.colorCircle,"stroke-width":e.strokeBottom||e.stroke},c),l="top"===r?{class:"".concat(i.pieName,"-circle-").concat(e.index)}:s,u=t({cx:"50%",cy:"50%",r:42,"shape-rendering":"geometricPrecision","data-angle":n?0:""},l);return i.setAttr(o,u,!1),o})),r(this,"setAttr",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in t)r?e.setAttributeNS(null,n,t[n]):e.setAttribute(n,t[n])})),this.pieName=o,this.svg="http://www.w3.org/2000/svg";var c=document.querySelectorAll(".".concat(o)),a=[].slice.call(c);a.map((function(e,t){e.setAttribute("data-index",t+1)})),this.initial(a)}}();
